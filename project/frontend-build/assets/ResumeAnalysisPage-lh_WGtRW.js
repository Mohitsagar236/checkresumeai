const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pdf-worker-manager-1RiA_HAk.js","assets/pdfjs-Cev1TANf.js","assets/heavy-pages-C8trrwvk.js","assets/react-vendor-GyENwBWe.js","assets/vendor-x74MHN4I.js","assets/api-auth-dsn4brwG.js","assets/utilities-CaqBGVfY.js","assets/ui-components-C10pzA45.js","assets/heavy-pages-DZDurRSM.css"])))=>i.map(i=>d[i]);
import{r as n,j as e,b as ae,R as oe}from"./react-vendor-GyENwBWe.js";import{u as ce,_ as de}from"./api-auth-dsn4brwG.js";import{C as q,n as K,o as X,p as Y,q as Z,B as Q,c as me,z as ee,u as ue,b as xe,d as pe,t as ge}from"./heavy-pages-C8trrwvk.js";import{F as fe}from"./FileUpload-eMqjjeFO.js";import{B as te}from"./Badge-fzk0WFbd.js";import{v as se,G as re,g as he,P as be}from"./pdfjs-Cev1TANf.js";import{R as ye,T as I,a as je,C as B,j as we,L as Ne,A as ke,Z as O,X as ve}from"./utilities-CaqBGVfY.js";import{a as Pe}from"./groqService-BCUWlnQf.js";import{m as f}from"./ui-components-C10pzA45.js";import{L as Re}from"./LoginModal-BiTeFKdS.js";import{S as Se}from"./SignupModal-D7dJAM8F.js";import"./vendor-x74MHN4I.js";import"./useOAuthWithTimeout-CTxafyi4.js";let U=!1,E=null;function ne(){return"/pdf-worker/pdf.worker.min.mjs"}async function Ce(){try{const r=ne();if(!(await fetch(r,{method:"HEAD"})).ok)throw new Error(`Worker file not found at ${r}`);return!0}catch(r){return console.error("PDF.js worker verification failed:",r),!1}}async function Ae(){if(!U){if(E)return E;console.log("Initializing PDF.js worker (simple method)..."),E=(async()=>{try{const r=ne();if(console.log("Using worker source:",r),!await Ce())throw new Error("PDF.js worker file is not available");re.workerSrc||(re.workerSrc=r),U=!0,console.log("PDF.js worker initialized successfully (simple method)")}catch(r){throw console.error("Simple PDF.js worker initialization failed:",r),U=!1,r}})(),await E,E=null}}function Fe(){return U}function De(r,c){const o={data:r,cMapUrl:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${se}/cmaps/`,cMapPacked:!0,standardFontDataUrl:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${se}/standard_fonts/`,useWorkerFetch:!1,disableAutoFetch:!0,disableStream:!0,disableRange:!0};return c&&(o.password=c),o}function Ee(){console.warn("Resetting simple PDF.js worker state..."),U=!1,E=null}async function ze(){Fe()||(console.warn("PDF.js worker not initialized. Initializing..."),Ee(),await Ae())}const Te=({file:r,width:c="100%",height:o=600,page:m=1,scale:i=1.2,className:l="",onLoadComplete:N,onError:d,allowRetry:z=!0})=>{const b=n.useRef(null),u=n.useRef(null),x=n.useRef(null),p=n.useRef(!0),[P,j]=n.useState(m),[t,R]=n.useState(0),[C,w]=n.useState(!0),[k,h]=n.useState(null),[J,V]=n.useState(0),[D,L]=n.useState(!1),[M,A]=n.useState(!1),[F,T]=n.useState("");n.useEffect(()=>()=>{p.current=!1,u.current&&(safeCleanupTask(u.current),u.current=null),x.current&&(cleanupPdfDocument(x.current),x.current=null)},[]),n.useEffect(()=>{(async()=>{await ze()})()},[]),n.useEffect(()=>{if(!r){w(!1);return}return W(),()=>{u.current&&(safeCleanupTask(u.current),u.current=null),x.current&&(cleanupPdfDocument(x.current),x.current=null)}},[r,J]),n.useEffect(()=>{F&&D&&!M&&(A(!0),W(F))},[F,D,M]);const W=n.useCallback(async a=>{var y;if(!(!r||!p.current)){u.current&&(safeCleanupTask(u.current),u.current=null),x.current&&(cleanupPdfDocument(x.current),x.current=null),w(!0),h(null);try{let g;r instanceof File?g=await r.arrayBuffer():g=await r.arrayBuffer();const v=De(new Uint8Array(g),a),S=he(v);u.current=S,S.onPassword=(Le,le)=>{p.current&&(L(!0),w(!1),le===be.INCORRECT_PASSWORD?(h({message:"Incorrect password",code:"PASSWORD_INCORRECT"}),A(!1)):h({message:"This PDF is password protected",code:"PASSWORD_REQUIRED"}))};const H=await S.promise;if(!p.current){cleanupPdfDocument(H);return}x.current=H;const G=H.numPages;R(G),j(Math.min(m,G));const ie=await H.getPage(Math.min(m,G));_(ie),N&&p.current&&N(G),r instanceof File&&URL.revokeObjectURL(fileUrl)}catch(g){if(!p.current)return;console.error("Error loading PDF:",g),w(!1);const v=g,S=(y=v.message)!=null&&y.includes("password")?"PASSWORD_ERROR":"LOADING_ERROR";h({message:v.message||"Failed to load PDF",code:S}),d&&p.current&&d(v,S)}}},[r,m,N,d]),_=n.useCallback(async a=>{if(!(!b.current||!p.current))try{const y=b.current,g=y.getContext("2d");if(!g)throw new Error("Canvas context could not be created");const v=a.getViewport({scale:i});y.height=v.height,y.width=v.width;const S={canvasContext:g,viewport:v};await a.render(S).promise,p.current&&w(!1)}catch(y){if(!p.current)return;console.error("Error rendering PDF page:",y),w(!1);const g=y;h({message:g.message||"Failed to render PDF page",code:"RENDER_ERROR"}),d&&p.current&&d(g,"RENDER_ERROR")}},[i,d]),$=n.useCallback(()=>{V(a=>a+1),h(null),L(!1),A(!1),T("")},[]),s=n.useCallback(a=>{a.preventDefault(),A(!1)},[]);return C?e.jsx("div",{className:`pdf-viewer-container ${l}`,style:{width:c,height:o,position:"relative"},children:e.jsxs("div",{className:"pdf-loading-indicator",children:[e.jsx(ye,{size:24,className:"animate-spin"}),e.jsx("span",{children:"Loading PDF..."})]})}):k?e.jsx("div",{className:`pdf-viewer-container pdf-error ${l}`,style:{width:c,height:o,position:"relative"},children:e.jsxs("div",{className:"pdf-error-message",children:[e.jsx(I,{size:24,className:"text-red-500"}),e.jsx("span",{children:k.message}),z&&e.jsx("button",{onClick:$,className:"pdf-retry-button",children:"Retry"})]})}):D?e.jsx("div",{className:`pdf-viewer-container pdf-password ${l}`,style:{width:c,height:o,position:"relative"},children:e.jsxs("div",{className:"pdf-password-form",children:[e.jsxs("div",{className:"pdf-password-header",children:[e.jsx(je,{size:24,className:"text-amber-500"}),e.jsx("h3",{children:"Password Protected PDF"})]}),e.jsxs("form",{onSubmit:s,children:[e.jsx("input",{type:"password",value:F,onChange:a=>T(a.target.value),placeholder:"Enter password",className:"pdf-password-input",autoFocus:!0}),e.jsx("button",{type:"submit",className:"pdf-password-submit",children:"Unlock PDF"})]})]})}):e.jsx("div",{className:`pdf-viewer-container ${l}`,style:{width:c,height:o,overflow:"auto"},children:e.jsx("canvas",{ref:b,className:"pdf-canvas"})})};function Ie(r={}){const[c,o]=n.useState(null),m=ce({mutationFn:async({resumeData:i,jobRole:l})=>await Pe(i,l),onSuccess:i=>{o(i),r.onSuccess&&r.onSuccess(i)},onError:i=>{console.error("Resume analysis error:",i),r.onError&&r.onError(i)}});return{analyzeResume:m.mutate,isAnalyzing:m.isPending,error:m.error,result:c,reset:()=>{o(null),m.reset()}}}const Oe=({onResumeUpload:r,onJobRoleSelect:c,onSubmit:o,jobRoles:m=[],isPremium:i=!1})=>{var $;const[l,N]=n.useState(null),[d,z]=n.useState(""),[b,u]=n.useState(!1),[x,p]=n.useState(!1),[P,j]=n.useState(null),[t,R]=n.useState(null),C=ae(),{analyzeResume:w,isAnalyzing:k}=Ie({onSuccess:s=>{C("/results",{state:{analysis:s,isPremium:i,fileName:l==null?void 0:l.name}})},onError:s=>{j(`Analysis failed: ${s.message}`)}}),h=async s=>{N(s),u(!0),j(null),console.log("Processing file:",s.name,s.type,s.size),setTimeout(async()=>{try{const a=await ee.processResume(s);console.log("Resume processed successfully:",a),R(a),r&&r(s,a),p(!0)}catch(a){console.error("Error processing resume:",a),j("Failed to process resume. Please ensure the file is a valid PDF or try a different file.")}finally{u(!1)}},100)},J=s=>{z(s.target.value),c&&c(s.target.value)},V=s=>{if(s.preventDefault(),console.log("Form submission triggered",{file:l,jobRole:d,processedResume:t}),!l||!d){j("Please upload a resume and select a job role.");return}if(!t)if(l){console.log("Attempting to process resume again"),u(!0),ee.processResume(l).then(a=>{R(a),D(a)}).catch(a=>{console.error("Error re-processing resume:",a),j("Failed to process resume. Please try uploading again or use a different file."),u(!1)});return}else{j("Resume processing failed. Please try uploading again.");return}D(t)},D=s=>{var a,y;o&&(console.log("Calling onSubmit callback"),o()),console.log("Analyzing resume with data:",{resumeData:s,jobRole:((a=m.find(g=>g.id===d))==null?void 0:a.title)||d}),w({resumeData:s,jobRole:((y=m.find(g=>g.id===d))==null?void 0:y.title)||d})},L=[{id:1,text:"Live ATS score monitoring during analysis",isPremium:!0},{id:2,text:"Real-time keyword match detection",isPremium:!0},{id:3,text:"Instant feedback as you edit your resume",isPremium:!0},{id:4,text:"Live coaching on improving resume sections",isPremium:!0},{id:5,text:"Continuous scoring trend visualization",isPremium:!0}],M=[{id:1,text:"Missing key skills section",type:"error"},{id:2,text:"Too many bullet points under one job role",type:"warning"},{id:3,text:"Education section is complete",type:"success"}],A=(t==null?void 0:t.score)??0,F=(t==null?void 0:t.keywordMatch)??0,T=(t==null?void 0:t.formattingScore)??0,W=(t==null?void 0:t.skillsGap)||[],_=(t==null?void 0:t.atsCompatibility)??0;return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[e.jsxs(f.div,{className:"text-center mb-6 md:mb-10",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.7},children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold mb-4 md:mb-6 bg-clip-text text-transparent bg-gradient-to-r from-blue-600 via-indigo-500 to-purple-600",children:"Resume Analysis"}),e.jsxs("p",{className:"text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto leading-relaxed",children:["AI-powered resume optimization to ",e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"help you stand out"})," from other applicants"]}),e.jsx("div",{className:"flex justify-center mt-5",children:e.jsxs(f.div,{className:"inline-flex items-center px-4 py-2 rounded-full bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 text-sm",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5,duration:.3},children:[e.jsx(B,{className:"w-4 h-4 mr-2 text-green-500"}),e.jsx("span",{className:"text-blue-800 dark:text-blue-300",children:"ATS-optimized resume analysis"})]})})]}),t&&e.jsxs("div",{className:"mt-8 p-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Advanced Analysis Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Resume Score"}),e.jsx("progress",{className:"w-full",value:A,max:100}),e.jsxs("span",{className:"text-sm",children:[A,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Keyword Match"}),e.jsx("progress",{className:"w-full",value:F,max:100}),e.jsxs("span",{className:"text-sm",children:[F,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Formatting Score"}),e.jsx("progress",{className:"w-full",value:T,max:100}),e.jsxs("span",{className:"text-sm",children:[T,"%"]})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"ATS Compatibility"}),e.jsx("progress",{className:"w-full",value:_,max:100}),e.jsxs("span",{className:"text-sm",children:[_,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Skills Gap Assessment"}),e.jsx("ul",{className:"list-disc list-inside text-sm",children:W.map((s,a)=>e.jsx("li",{children:s},a))||e.jsx("li",{children:"No major gaps detected."})})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 md:gap-8",children:[e.jsxs(q,{className:"border-0 shadow-lg dark:shadow-slate-900/50 order-1 lg:order-none",children:[e.jsxs(K,{className:"space-y-1 sm:space-y-2 p-4 sm:p-6",children:[e.jsxs(X,{className:"flex items-center flex-wrap text-xl sm:text-2xl",children:[e.jsx("span",{children:"Upload Resume"}),i&&e.jsx(f.span,{className:"text-gradient-premium dark:text-gradient-gold ml-2",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:"Premium"})]}),e.jsx(Y,{className:"text-sm sm:text-base",children:"Get instant analysis and actionable recommendations to improve your resume"})]}),e.jsx(Z,{className:"p-4 sm:p-6",children:e.jsxs("form",{onSubmit:V,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Upload Resume *"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"PDF or DOCX format"})]}),e.jsx(f.div,{whileHover:{boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:e.jsx(fe,{onFileSelected:h,accept:".pdf,.docx",maxSize:5*1024*1024,isLoading:b})}),P&&e.jsxs(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm text-red-500 mt-1 flex items-center bg-red-50 dark:bg-red-900/20 p-2 rounded-md",children:[e.jsx(I,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{children:P})]}),l&&!b&&!P&&e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-green-600 mt-1 flex items-center bg-green-50 dark:bg-green-900/20 p-2 rounded-md",children:[e.jsx(B,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsxs("span",{children:['File "',l.name,'" successfully uploaded and processed']})]})]}),x&&l&&e.jsxs(f.div,{className:"mt-6",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Document Preview"}),e.jsx("button",{onClick:()=>p(!1),className:"text-xs text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Hide preview"})]}),e.jsx("div",{className:"border rounded-lg dark:border-gray-700 overflow-hidden shadow-sm bg-white dark:bg-gray-800",children:e.jsx(Te,{file:l,width:"100%",height:300,scale:1.2,className:"w-full"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{htmlFor:"jobRole",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Target Job Role *"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"For best results, be specific"})]}),e.jsxs("div",{className:"relative",children:["                  ",e.jsxs("select",{id:"jobRole",value:d,onChange:J,className:"mt-1 block w-full px-4 py-3 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md dark:border-gray-600 dark:text-gray-200 bg-white dark:bg-gray-800 appearance-none",required:!0,children:[e.jsx("option",{value:"",children:"Select the job you're applying for"}),m.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-400",children:e.jsx(we,{className:"w-4 h-4"})})]}),d&&e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Analysis will be optimized for: ",e.jsx("span",{className:"font-medium",children:($=m.find(s=>s.id===d))==null?void 0:$.title})]})]}),e.jsxs(f.div,{whileHover:{scale:1.01},whileTap:{scale:.99},className:"relative",children:["                ",e.jsx(Q,{type:"submit",disabled:k,className:`w-full py-3 sm:py-4 text-base font-medium shadow-md ${!l||!d?"opacity-90 hover:opacity-100":"opacity-100"}`,variant:i?"premium":"default",onClick:()=>{if(!l||!d){j("Please upload a resume and select a job role.");return}},children:e.jsx("span",{className:"flex items-center justify-center gap-3",children:k?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"flex items-center justify-center w-5 h-5 relative",children:[e.jsx(Ne,{className:"h-5 w-5 animate-spin absolute"}),e.jsx("span",{className:"animate-ping absolute w-5 h-5 rounded-full bg-blue-200 dark:bg-blue-700 opacity-75"})]}),e.jsx("span",{className:"animate-pulse",children:"Analyzing Your Resume..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"View Detailed Analysis"}),e.jsx(ke,{className:"h-5 w-5"})]})})}),"                ",(!l||!d)&&!k&&e.jsx(f.div,{className:"absolute -bottom-10 left-0 right-0 text-sm bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-800/50 text-amber-700 dark:text-amber-300 p-2 rounded-md text-center shadow-sm",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),l?"Please select a job role":"Please upload your resume"]})}),P&&!k&&e.jsx(f.div,{className:"absolute -bottom-10 left-0 right-0 text-sm bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800/50 text-red-700 dark:text-red-300 p-2 rounded-md text-center shadow-sm",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),P]})})]})]})})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6 md:space-y-8 order-2 lg:order-none",children:[e.jsxs(q,{className:"border-0 shadow-lg dark:shadow-slate-900/50 overflow-hidden",children:[e.jsxs(K,{className:"p-5 sm:p-6 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-b border-blue-100 dark:border-blue-900/30",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(O,{className:"w-5 h-5 mr-2 text-blue-600 dark:text-blue-400"}),e.jsx(X,{className:"text-lg sm:text-xl bg-clip-text text-transparent bg-gradient-to-r from-blue-700 to-indigo-700 dark:from-blue-400 dark:to-indigo-400",children:"Real-Time Analysis Features"})]}),e.jsx(Y,{className:"text-sm sm:text-base",children:"Premium real-time features enhance your resume optimization experience"})]}),e.jsx(Z,{className:"p-5 sm:p-6",children:e.jsx("div",{className:"space-y-3 sm:space-y-4",children:L.map((s,a)=>e.jsxs(f.div,{className:"flex justify-between items-center p-3 sm:p-4 rounded-lg hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-all border border-transparent hover:border-blue-100 dark:hover:border-blue-800/30",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:a*.1},whileHover:{x:5},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",children:s.id}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:s.text})]}),e.jsx(te,{variant:"outline",className:"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs font-medium px-2.5 py-1",children:"Real-time"})]},s.id))})})]}),e.jsxs(q,{className:"border-0 shadow-lg dark:shadow-slate-900/50 overflow-hidden",children:[e.jsxs(K,{className:"p-5 sm:p-6 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border-b border-amber-100 dark:border-amber-900/30",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(O,{className:"w-5 h-5 mr-2 text-amber-500 dark:text-amber-400"}),e.jsx(X,{className:"text-lg sm:text-xl bg-clip-text text-transparent bg-gradient-to-r from-amber-700 to-orange-700 dark:from-amber-400 dark:to-orange-400",children:"Premium Resume Check"})]}),e.jsx(Y,{className:"text-sm sm:text-base",children:"Identify critical issues before your resume gets rejected"})]}),e.jsx(Z,{className:"p-5 sm:p-6",children:e.jsxs("div",{className:"space-y-4",children:[M.map((s,a)=>e.jsxs(f.div,{className:me("flex items-center gap-3 p-4 rounded-lg border",s.type==="error"?"bg-red-50 dark:bg-red-900/10 text-red-800 dark:text-red-300 border-red-200 dark:border-red-900/30":s.type==="warning"?"bg-amber-50 dark:bg-amber-900/10 text-amber-800 dark:text-amber-300 border-amber-200 dark:border-amber-900/30":"bg-green-50 dark:bg-green-900/10 text-green-800 dark:text-green-300 border-green-200 dark:border-green-900/30"),initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:a*.15},whileHover:{scale:1.02},children:[s.type==="error"&&e.jsx("div",{className:"p-2 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",children:e.jsx(ve,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.type==="warning"&&e.jsx("div",{className:"p-2 rounded-full bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400",children:e.jsx(I,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.type==="success"&&e.jsx("div",{className:"p-2 rounded-full bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",children:e.jsx(B,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsx("span",{className:"text-sm sm:text-base",children:s.text})]},s.id)),e.jsxs(f.div,{className:"mt-8 sm:mt-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("h4",{className:"font-bold text-lg sm:text-xl text-gray-800 dark:text-gray-200 mb-2",children:"Unlock Premium Features"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get complete analysis and optimization recommendations"})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/10 dark:to-purple-900/10 p-4 rounded-lg border border-indigo-100 dark:border-indigo-900/30 mb-5",children:e.jsx("ul",{className:"space-y-3",children:["Comprehensive Resume Score Analysis","Advanced ATS Compatibility Analysis","In-depth Skills Gap Assessment","Professional Formatting Guidelines","Industry-specific Keyword Optimization"].map((s,a)=>e.jsx("li",{children:e.jsxs(f.div,{className:"flex items-center gap-3",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.6+a*.1},children:[e.jsx("div",{className:"p-1 rounded-full bg-green-100 dark:bg-green-900/30",children:e.jsx(B,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),e.jsx("span",{className:"text-gray-800 dark:text-gray-300",children:s})]})},a))})}),e.jsxs(f.div,{className:"relative group",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-pink-600 to-purple-600 rounded-lg blur opacity-50 group-hover:opacity-75 transition duration-500"}),e.jsx(Q,{type:"button",variant:"premium",className:"relative w-full py-3 sm:py-4 text-base font-medium",onClick:()=>C("/pricing"),children:e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(O,{className:"mr-2 h-5 w-5"}),"Upgrade to Premium"]})})]})]})]})})]})]})]})]})},Ue=r=>{const{isPremium:c,...o}=r;return oe.useEffect(()=>{de(()=>import("./pdf-worker-manager-1RiA_HAk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(m=>{m.ensurePdfWorkerInitialized().catch(i=>{console.error("Error initializing PDF worker in EnhancedResumeAnalysisHero:",i)})}).catch(m=>{console.error("Failed to import PDF worker manager:",m)})},[]),e.jsxs("div",{className:"relative",children:[c&&e.jsx("div",{className:"absolute -top-4 right-4 z-10",children:e.jsxs(te,{variant:"premium",className:"px-3 py-1 flex items-center gap-1",children:[e.jsx(O,{className:"h-4 w-4"}),"Premium Analysis"]})}),e.jsx("div",{className:c?"border-2 border-purple-500 rounded-lg shadow-purple-100 dark:shadow-purple-900/20 p-1":"",children:e.jsx(Oe,{...o,isPremium:c})}),c&&e.jsxs("div",{className:"mt-4 bg-gradient-to-r from-purple-100 to-indigo-100 dark:from-purple-900/30 dark:to-indigo-900/30 p-4 rounded-lg shadow-sm",children:[e.jsxs("h3",{className:"font-medium text-purple-800 dark:text-purple-300 flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Premium Features Enabled"]}),e.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-400 mt-1",children:"You have access to enhanced analytics, real-time scoring, and advanced ATS recommendations."})]})]})};function Ze(){const{user:r}=ue(),{isPremium:c}=xe(),{showToast:o}=pe(),m=ae(),[i,l]=n.useState(null),[N,d]=n.useState(""),[z,b]=n.useState(!1),[u,x]=n.useState(!1),p=t=>{if(!r){b(!0);return}l(t),o(`Resume "${t.name}" uploaded successfully!`,"success")},P=t=>{d(t)},j=()=>{if(console.log("ResumeAnalysisPage handleSubmit called",{user:r,file:i,jobRole:N}),!r){b(!0);return}if(!i||!N){o("Please upload a resume and select a job role.","error");return}o("Preparing your analysis results...","info");try{const t=new FileReader;t.onload=R=>{var C;try{const k=((C=R.target)==null?void 0:C.result).split("base64,")[1]||"",h=new URLSearchParams;h.set("jobRoleId",N),h.set("fileName",i.name),h.set("fileSize",`${i.size}`),h.set("fileType",i.type),h.set("resumeContent",k),console.log("Navigating to results page with params",{jobRoleId:N,fileName:i.name}),m(`/results?${h.toString()}`)}catch(w){console.error("Error in FileReader onload:",w),o("Error processing file. Please try again.","error")}},t.onerror=R=>{console.error("FileReader error:",R),o("Error reading file. Please try again with a different file.","error")},t.readAsDataURL(i)}catch(t){console.error("Error in handleSubmit:",t),o("An unexpected error occurred. Please try again.","error")}};return e.jsxs("div",{className:"min-h-screen pt-24 pb-16 bg-gray-50 text-gray-900 dark:bg-slate-900 dark:text-neutral-100",children:[e.jsx("div",{className:"container mx-auto px-4 md:px-6",children:e.jsx(Ue,{onResumeUpload:p,onJobRoleSelect:P,onSubmit:j,jobRoles:ge,isPremium:c})}),e.jsx(Re,{isOpen:z,onClose:()=>b(!1),onSignUpClick:()=>{b(!1),x(!0)}}),e.jsx(Se,{isOpen:u,onClose:()=>x(!1),onLoginClick:()=>{x(!1),b(!0)}})]})}export{Ze as ResumeAnalysisPage,Ze as default};
