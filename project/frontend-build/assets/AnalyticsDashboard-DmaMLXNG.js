import{r as a,j as e}from"./react-vendor-GyENwBWe.js";import{C as n,q as c,B as l,n as f,o as y,L as R}from"./heavy-pages-C8trrwvk.js";import{B as b}from"./Badge-fzk0WFbd.js";import{a3 as E,ax as O,ay as $,d as Y,U as G,F as H,Z as X,b as Z,s as q,i as J,h as Q}from"./utilities-CaqBGVfY.js";import{m,A as V}from"./ui-components-C10pzA45.js";import{R as k,B as _,C as D,X as B,Y as K,T as L,b as T,c as ee,P as se,d as te,e as ae,f as re,L as ie,g as N}from"./charts-DcnoYhHA.js";import"./vendor-x74MHN4I.js";import"./api-auth-dsn4brwG.js";import"./pdfjs-Cev1TANf.js";const le=a.memo(({data:s,chartColors:t})=>e.jsx(k,{width:"100%",height:"100%",children:e.jsxs(ie,{data:s,children:[e.jsx(D,{strokeDasharray:"3 3",opacity:.3}),e.jsx(B,{dataKey:"timestamp"}),e.jsx(K,{domain:[0,100]}),e.jsx(L,{}),e.jsx(N,{type:"monotone",dataKey:"atsScore",stroke:t[0],strokeWidth:2,name:"ATS Score"}),e.jsx(N,{type:"monotone",dataKey:"readability",stroke:t[1],strokeWidth:2,name:"Readability"}),e.jsx(N,{type:"monotone",dataKey:"keywords",stroke:t[2],strokeWidth:2,name:"Keywords"})]})})),ne=a.memo(({data:s,chartColors:t})=>e.jsx(k,{width:"100%",height:"100%",children:e.jsxs(ee,{data:s,children:[e.jsx(se,{}),e.jsx(te,{dataKey:"subject"}),e.jsx(ae,{domain:[0,100]}),e.jsx(re,{name:"Score",dataKey:"score",stroke:t[0],fill:t[0],fillOpacity:.1,strokeWidth:2})]})})),ce=a.memo(({data:s,chartColors:t})=>e.jsx(k,{width:"100%",height:"100%",children:e.jsxs(_,{data:s,children:[e.jsx(D,{strokeDasharray:"3 3",opacity:.3}),e.jsx(B,{dataKey:"name"}),e.jsx(K,{}),e.jsx(L,{}),e.jsx(T,{dataKey:"completed",fill:t[0],name:"Completed"}),e.jsx(T,{dataKey:"total",fill:t[1],opacity:.3,name:"Total"})]})})),de=a.memo(({recommendation:s,index:t})=>e.jsxs(m.div,{initial:{opacity:0,x:-5},animate:{opacity:1,x:0},transition:{delay:t*.05},className:"flex items-start space-x-3 p-3 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx(b,{variant:s.priority==="high"?"error":s.priority==="medium"?"warning":"default",children:s.priority}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.category}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.description})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm font-medium",children:["+",s.impact,"% impact"]})})]},t)),xe=a.memo(()=>e.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),e.jsx("span",{children:"Live updates enabled"})]})),oe=a.memo(({onUpgrade:s})=>e.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm flex items-center justify-center rounded-lg z-10",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-amber-400 to-orange-500 rounded-full flex items-center justify-center",children:e.jsx(Q,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Premium Analytics"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 max-w-xs",children:"Unlock detailed analytics, trend analysis, and industry benchmarks"}),e.jsx(l,{onClick:s,className:"bg-gradient-to-r from-amber-500 to-orange-600",children:"Upgrade Now"})]})}));function ke({data:s,isPremium:t=!1,onUpgrade:z,onRefresh:v,isRefreshing:w=!1,lastUpdated:C,expiryDate:me,formattedExpiryDate:S}){const[x,P]=a.useState("1d"),[h,u]=a.useState("trend"),[I,A]=a.useState(!1),[F,M]=a.useState(!1),g=a.useRef("");a.useEffect(()=>{const r=JSON.stringify(s.trendData[0]);if(g.current&&g.current!==r){M(!0);const d=setTimeout(()=>{M(!1)},3e3);return()=>clearTimeout(d)}g.current=r},[s.trendData]);const i=a.useMemo(()=>{const r=s.atsScore-s.previousAtsScore,d=Math.round(s.skillsMatched/s.totalSkills*100);return{atsScoreChange:r,skillsMatchPercentage:d,getChangeIcon:o=>o>0?e.jsx(E,{className:"h-4 w-4 text-green-500"}):o<0?e.jsx(O,{className:"h-4 w-4 text-red-500"}):e.jsx($,{className:"h-4 w-4 text-gray-500"}),getChangeColor:o=>o>0?"text-green-600 dark:text-green-400":o<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}},[s.atsScore,s.previousAtsScore,s.skillsMatched,s.totalSkills]),p=a.useMemo(()=>["#3B82F6","#8B5CF6","#10B981","#F59E0B","#EF4444"],[]),U=a.useMemo(()=>[{subject:"ATS Score",score:s.atsScore,fullMark:100},{subject:"Skills Match",score:i.skillsMatchPercentage,fullMark:100},{subject:"Readability",score:s.readabilityScore,fullMark:100},{subject:"Keywords",score:s.keywordDensity*10,fullMark:100},{subject:"Structure",score:85,fullMark:100},{subject:"Content",score:78,fullMark:100}],[s.atsScore,i.skillsMatchPercentage,s.readabilityScore,s.keywordDensity]),j=r=>{r!==x&&(A(!0),setTimeout(()=>{P(r),A(!1)},300))},W=()=>{if(I)return e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx(R,{size:"lg"})});switch(h){case"trend":return e.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"h-full",children:e.jsx(le,{data:s.trendData,chartColors:p})},"trend");case"radar":return e.jsx(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"h-full flex items-center justify-center",children:e.jsx(ne,{data:U,chartColors:p})},"radar");case"breakdown":return e.jsx(m.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},className:"h-full",children:e.jsx(ce,{data:s.sectionCompleteness,chartColors:p})},"breakdown");default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(n,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"ATS Score"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[s.atsScore,"%"]}),e.jsxs("div",{className:`flex items-center ${i.getChangeColor(i.atsScoreChange)}`,children:[i.getChangeIcon(i.atsScoreChange),e.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(i.atsScoreChange),"%"]})]})]})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-full",children:e.jsx(Y,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})})}),e.jsx(n,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Skills Matched"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[s.skillsMatched,"/",s.totalSkills]}),e.jsxs(b,{variant:i.skillsMatchPercentage>=70?"success":"warning",children:[i.skillsMatchPercentage,"%"]})]})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-full",children:e.jsx(G,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})})}),e.jsx(n,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Readability"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.readabilityScore,"%"]})]}),e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-full",children:e.jsx(H,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})})]})})}),e.jsx(n,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Keyword Density"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.keywordDensity,"%"]})]}),e.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/20 rounded-full",children:e.jsx(X,{className:"h-6 w-6 text-amber-600 dark:text-amber-400"})})]})})})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(l,{variant:h==="trend"?"default":"outline",size:"sm",onClick:()=>u("trend"),children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Trend"]}),e.jsxs(l,{variant:h==="radar"?"default":"outline",size:"sm",onClick:()=>u("radar"),children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs(l,{variant:h==="breakdown"?"default":"outline",size:"sm",onClick:()=>u("breakdown"),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Breakdown"]})]}),t&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{variant:x==="1h"?"default":"outline",size:"sm",onClick:()=>j("1h"),children:"1H"}),e.jsx(l,{variant:x==="1d"?"default":"outline",size:"sm",onClick:()=>j("1d"),children:"1D"}),e.jsx(l,{variant:x==="1w"?"default":"outline",size:"sm",onClick:()=>j("1w"),children:"1W"}),e.jsx(l,{variant:x==="1m"?"default":"outline",size:"sm",onClick:()=>j("1m"),children:"1M"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:["      ",e.jsxs(n,{className:"lg:col-span-2",children:["          ",e.jsxs(f,{children:[t&&S&&e.jsxs("div",{className:"text-sm bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-400 px-3 py-1 rounded-md mb-2 flex items-center w-fit",children:[e.jsx(Crown,{className:"h-3 w-3 mr-1"}),"Premium expires: ",S]}),e.jsxs(y,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"Performance Analytics"}),t&&F&&e.jsx(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"New data received"})]}),!t&&e.jsx(b,{variant:"premium",children:"Premium"}),t&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{}),v&&e.jsxs(l,{variant:"outline",size:"sm",onClick:v,disabled:w,className:"flex items-center gap-1",children:[e.jsx(RefreshCw,{className:`h-4 w-4 ${w?"animate-spin":""}`}),"Refresh"]})]})]}),C&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last updated: ",new Date(C).toLocaleString()]})]}),e.jsxs(c,{className:"relative",children:[!t&&e.jsx(oe,{onUpgrade:z}),e.jsx("div",{className:"h-80",children:e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx(R,{size:"lg"})}),children:e.jsx(V,{mode:"wait",children:W()})})})]})]})]}),t&&e.jsxs(n,{children:[e.jsx(f,{children:e.jsx(y,{children:"Industry Benchmark"})}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your Score"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[s.atsScore,"%"]})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Industry Average"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:[s.industryBenchmark.averageATS,"%"]})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Top 10%"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[s.industryBenchmark.topPercentile,"%"]})]})]})})]}),e.jsxs(n,{children:[e.jsx(f,{children:e.jsx(y,{children:"Smart Recommendations"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3",children:s.recommendations.map((r,d)=>e.jsx(de,{recommendation:r,index:d},`${r.category}-${d}`))})})]})]})}export{ke as AnalyticsDashboard};
