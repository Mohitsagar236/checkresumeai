import{j as e,r as o,b as ae,R as V}from"./react-vendor-GyENwBWe.js";import{m as te,P as ie,C as se,u as ne,b as le,d as oe,n as de,o as ce,p as me,q as ue,L as ge,I as xe,t as he,B}from"./heavy-pages-C8trrwvk.js";import{F as be}from"./FileUpload-eMqjjeFO.js";import{m as Y,A as X,a as K}from"./ui-components-C10pzA45.js";import{b as pe,ae as Z,C as U,L as Q,J as fe,Z as G,af as _,T as W,F as H}from"./utilities-CaqBGVfY.js";import{u as ye}from"./main-CX0Opbnb.js";import"./vendor-x74MHN4I.js";import{B as ee}from"./Badge-fzk0WFbd.js";import{R as je,A as ke,C as we,X as ve,Y as Ne,T as Ce,a as Se}from"./charts-DcnoYhHA.js";import{L as Ae}from"./LoginModal-BiTeFKdS.js";import{S as Me}from"./SignupModal-D7dJAM8F.js";import"./api-auth-dsn4brwG.js";import"./pdfjs-Cev1TANf.js";import"./useOAuthWithTimeout-CTxafyi4.js";function Re({progress:i,showPercentage:a=!0,className:x="",stages:h}){const b=t=>{switch(t){case"pending":return e.jsx(fe,{className:"w-4 h-4 text-gray-400"});case"processing":return e.jsx(Q,{className:"w-4 h-4 text-blue-500 animate-spin"});case"completed":return e.jsx(U,{className:"w-4 h-4 text-green-500 mr-2"});case"error":return e.jsx(Z,{className:"w-4 h-4 text-red-500"})}};return e.jsx("div",{className:`w-full ${x}`,children:h?e.jsx("div",{className:"space-y-4",children:h.map(t=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center",children:[b(t.status),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t.name})]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.status==="error"?"Failed":`${t.progress}%`})]}),e.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-800/80 rounded-full overflow-hidden shadow-inner-light dark:shadow-inner-dark backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50",children:e.jsx(Y.div,{className:`h-full ${t.status==="completed"?"bg-gradient-to-r from-green-400 to-green-500 shadow-lg shadow-green-500/20":t.status==="processing"?"bg-gradient-brand shadow-lg shadow-brand-500/20 premium-shimmer":"bg-gray-300 dark:bg-gray-600"}`,initial:{width:0},animate:{width:`${t.progress}%`},transition:{duration:.5,ease:"easeInOut"}})})]},t.id))}):e.jsxs("div",{className:"progress-bar relative",children:[e.jsxs("div",{className:"h-4 bg-gray-100 dark:bg-gray-800/80 rounded-full overflow-hidden shadow-inner-light dark:shadow-inner-dark backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50",children:[e.jsx(Y.div,{className:"h-full bg-gradient-brand premium-shimmer shadow-lg shadow-brand-500/20",initial:{width:0},animate:{width:`${i}%`},transition:{duration:.8,ease:[.34,1.56,.64,1],delay:.1}}),e.jsx(Y.div,{className:"absolute top-0 left-0 h-full pointer-events-none",style:{width:`${i}%`},initial:{opacity:0},whileHover:{opacity:1},children:e.jsx("div",{className:"absolute right-0 top-0 h-4 w-1.5 cursor-indicator progress-indicator"})})]}),a&&e.jsxs("div",{className:"mt-1.5 flex justify-between items-center",children:[e.jsxs("div",{className:"progress-label flex items-center",children:[e.jsx(pe,{className:"w-3.5 h-3.5 mr-1.5 text-blue-500"}),e.jsx("span",{className:"text-xs text-gray-800 font-semibold",children:i<30?"Needs Improvement":i<70?"Good Progress":"Excellent"})]}),e.jsxs("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:[Math.round(i),"%"]})]})]})})}function Fe(i,a){const[x,h]=o.useState(i),[b,t]=o.useState({}),[I,l]=o.useState({}),m=o.useRef({}),k=o.useCallback((g,p)=>{if(m.current[g]!==p&&(m.current[g]=p,h(f=>({...f,[g]:p})),l(f=>({...f,[g]:!0})),a!=null&&a[g])){const f=a[g](p);t(c=>({...c,[g]:typeof f=="string"?f:void 0}))}},[a]),n=o.useCallback(()=>{if(!a)return!0;const g={};let p=!0;return Object.keys(a).forEach(f=>{const c=f,v=a[c];if(v){const u=v(x[c]);typeof u=="string"&&(g[c]=u,p=!1)}}),t(g),p},[x,a]),d=o.useCallback(()=>{h(i),t({}),l({})},[i]);return{formState:x,errors:b,touched:I,updateField:k,validateForm:n,resetForm:d,isValid:Object.keys(b).length===0}}function Pe(i="",a={}){const{tier:x="free",jobDescription:h="",enabled:b=!1,updateInterval:t=3e3}=a,[I,l]=o.useState({keywordMatches:{matched:[],missing:[],realtimeMatches:[]},atsScoreTrend:[],jobDescriptionSimilarity:0,liveFeedback:[]}),[m,k]=o.useState(!1),n=o.useCallback(()=>{const p=["Consider adding more specific technical skills related to your target role","Your experience section could benefit from more quantifiable achievements","The summary section is too long; consider condensing it","Add more keywords related to project management for better ATS matching","Consider restructuring your education section for better visibility","Your resume could benefit from a clearer hierarchy of information","Try using more active voice in your achievement descriptions","Consider adding certifications relevant to this job role","Your skills section could be more prominently positioned","Add more industry-specific terminology to improve keyword matching"],f=Math.floor(Math.random()*p.length),c=Math.random()>.7?"warning":Math.random()>.5?"suggestion":"improvement";return{id:`feedback-${Date.now()}`,message:p[f],type:c,timestamp:Date.now()}},[]),d=o.useCallback(()=>{if(x==="free"||!b||!i)return;const p=x==="freemium"?2:1;Math.floor(Date.now()/t)%p===0&&l(c=>{const v=["project management","strategic planning","team leadership","agile methodology","data analysis","problem solving","customer service","javascript","react","node.js","communication skills","stakeholder management"],u=v[Math.floor(Math.random()*v.length)],A=Math.random()>.3;let T=[...c.keywordMatches.matched],s=[...c.keywordMatches.missing];A&&!T.includes(u)?(T=[...T,u],s=s.filter(D=>D!==u)):!A&&!s.includes(u)&&!T.includes(u)&&(s=[...s,u]);const $=Math.min(100,Math.max(50,c.atsScoreTrend.length?c.atsScoreTrend[c.atsScoreTrend.length-1].score+(Math.random()*10-5):70+(Math.random()*10-5))),M={keywordMatches:{matched:T,missing:s,realtimeMatches:[...c.keywordMatches.realtimeMatches,{keyword:u,matched:A,timestamp:Date.now()}].slice(-10)},atsScoreTrend:[...c.atsScoreTrend,{timestamp:Date.now(),score:Math.round($)}].slice(-20)};return x==="premium"&&(M.jobDescriptionSimilarity=Math.min(100,Math.max(0,c.jobDescriptionSimilarity+(Math.random()*6-3))),Math.random()>.7&&(M.liveFeedback=[...c.liveFeedback||[],n()].slice(-5))),{...c,...M}})},[x,b,i,t,n]);o.useEffect(()=>{if(x!=="free"&&b&&i){k(!0);const p=setInterval(d,t);return()=>{clearInterval(p),k(!1)}}else k(!1)},[x,b,i,d,t]);const g=o.useCallback(()=>{l({keywordMatches:{matched:[],missing:[],realtimeMatches:[]},atsScoreTrend:[],jobDescriptionSimilarity:0,liveFeedback:[]})},[]);return{realTimeData:I,isActive:m,tier:x,clearRealTimeData:g}}function Ie(i,a,x={}){const{isPremium:h=!1,jobDescription:b,realTimeUpdates:t=!1,analysisInterval:I=5e3}=x,[l,m]=o.useState(null),[k,n]=o.useState(!1),[d,g]=o.useState(0),[p,f]=o.useState(""),[c,v]=o.useState(!1),[u,A]=o.useState(null),[T,s]=o.useState([{id:"format",name:"Format Analysis",progress:0,status:"pending"},{id:"content",name:"Content Analysis",progress:0,status:"pending"},{id:"skills",name:"Skills Analysis",progress:0,status:"pending"},{id:"recommendations",name:"Generating Recommendations",progress:0,status:"pending"}]),{realTimeData:$,isActive:M,clearRealTimeData:D}=Pe(p,{jobDescription:b,enabled:k&&t&&h,updateInterval:I/2}),J=o.useCallback(C=>{const R=C.reduce((F,N)=>F+N.progress,0);return Math.round(R/C.length)},[]);return o.useEffect(()=>{if(!i){f(""),A(null),v(!1);return}v(!0),A(null);const C=new FileReader;C.onload=async R=>{var F;try{const N=await Te((F=R.target)==null?void 0:F.result);f(N)}catch(N){A(N instanceof Error?N.message:"Error extracting PDF text")}finally{v(!1)}},C.onerror=()=>{A("Error reading PDF file"),v(!1)},C.readAsArrayBuffer(i)},[i]),o.useEffect(()=>{if(!i||!a){m(null),g(0),s(y=>y.map(r=>({...r,progress:0,status:"pending"}))),n(!1),D();return}if(c)return;if(u){s(y=>y.map(r=>({...r,status:"error"})));return}n(!0),g(0),s(y=>y.map(r=>({...r,progress:0,status:"pending"})));const C={format:1e3,content:1500,skills:1200,recommendations:800},R=[];Object.entries(C).forEach(([y,r],P,z)=>{const L=z.slice(0,P).reduce((w,[,S])=>w+S,0),j=window.setTimeout(()=>{const w=window.setInterval(()=>{s(S=>S.map(E=>{if(E.id===y){const O=Math.min(E.progress+10,100);return{...E,progress:O,status:O===100?"completed":"processing"}}return E}))},r/10);R.push(w)},L);R.push(j)});const F=window.setInterval(()=>{s(y=>{const r=J(y);return g(r),y})},100),N=Object.values(C).reduce((y,r)=>y+r,0)+500,q=window.setTimeout(()=>{m(te(a)),n(!1),g(100),R.forEach(y=>window.clearInterval(y)),window.clearInterval(F)},N);return()=>{R.forEach(y=>window.clearInterval(y)),window.clearInterval(F),window.clearTimeout(q)}},[i,a,J,D,c,u]),{analysis:l,isAnalyzing:k,progress:d,stages:T,realTimeData:$,isRealTimeActive:M,isLoadingPDF:c,pdfError:u}}async function Te(i){return new Promise(a=>{setTimeout(()=>{a("Sample PDF text extracted from buffer")},1e3)})}function De({isActive:i=!1,liveFeedback:a=[],atsScoreTrend:x=[],jobDescriptionSimilarity:h=0,recentKeywordMatches:b=[]}){const[t,I]=o.useState({liveFeedback:a,atsScoreTrend:x,jobDescriptionSimilarity:h,recentKeywordMatches:b});o.useEffect(()=>{I({liveFeedback:a,atsScoreTrend:x,jobDescriptionSimilarity:h,recentKeywordMatches:b})},[a,x,h,b]);const l=m=>new Date(m).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});return i?e.jsxs("div",{className:"space-y-6 real-time-feedback-container",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("h3",{className:"text-lg font-semibold text-gradient-premium dark:text-gradient-gold",children:"Real-Time Analysis"})]}),e.jsx(ee,{variant:"premium",children:"Premium Feature"})]}),e.jsxs(se,{className:"p-4 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm shadow-premium dark:shadow-premium-dark",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ATS Score Trend"}),e.jsx("div",{className:"h-48 w-full",children:e.jsx(je,{width:"100%",height:"100%",children:e.jsxs(ke,{data:t.atsScoreTrend.slice(-15),margin:{top:5,right:5,bottom:5,left:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"scoreGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#4F46E5",stopOpacity:.6}),e.jsx("stop",{offset:"95%",stopColor:"#4F46E5",stopOpacity:.1})]})}),e.jsx(we,{strokeDasharray:"3 3",opacity:.2}),e.jsx(ve,{dataKey:"timestamp",tickFormatter:l,tick:{fontSize:10},stroke:"#9CA3AF"}),e.jsx(Ne,{domain:[0,100],tick:{fontSize:10},stroke:"#9CA3AF"}),e.jsx(Ce,{labelFormatter:l,contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"8px",borderColor:"#E5E7EB",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:m=>[`${m}%`,"ATS Score"]}),e.jsx(Se,{type:"monotone",dataKey:"score",stroke:"#4F46E5",strokeWidth:2,fillOpacity:1,fill:"url(#scoreGradient)",animationDuration:500})]})})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Live Feedback"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{children:t.liveFeedback.map(m=>{const k=c=>{switch(c){case"warning":return{bgClass:"bg-amber-50 dark:bg-amber-900/20",borderClass:"border-amber-200 dark:border-amber-800/30",iconBgClass:"bg-amber-100 dark:bg-amber-800/40",iconColor:"text-amber-600 dark:text-amber-400",Icon:Z};case"suggestion":return{bgClass:"bg-blue-50 dark:bg-blue-900/20",borderClass:"border-blue-200 dark:border-blue-800/30",iconBgClass:"bg-blue-100 dark:bg-blue-800/40",iconColor:"text-blue-600 dark:text-blue-400",Icon:_};case"improvement":return{bgClass:"bg-green-50 dark:bg-green-900/20",borderClass:"border-green-200 dark:border-green-800/30",iconBgClass:"bg-green-100 dark:bg-green-800/40",iconColor:"text-green-600 dark:text-green-400",Icon:U};default:return{bgClass:"bg-gray-50 dark:bg-gray-900/30",borderClass:"border-gray-200 dark:border-gray-800/30",iconBgClass:"bg-gray-100 dark:bg-gray-800/40",iconColor:"text-gray-600 dark:text-gray-400",Icon:_}}},{bgClass:n,borderClass:d,iconBgClass:g,iconColor:p,Icon:f}=k(m.type);return e.jsxs(Y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:`p-4 rounded-lg border shadow-sm ${n} ${d} flex items-center gap-3`,children:[e.jsx("div",{className:`flex-shrink-0 ${g} p-1.5 rounded-full`,children:e.jsx(f,{className:`h-4 w-4 ${p}`})}),e.jsx("div",{className:"flex-1 text-sm text-gray-700 dark:text-gray-300",children:m.message}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:new Date(m.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},m.id)})}),t.liveFeedback.length===0&&e.jsx("div",{className:"p-4 rounded-lg border border-dashed border-gray-200 dark:border-gray-700 text-center text-sm text-gray-500 dark:text-gray-400",children:"Waiting for real-time feedback..."})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Recent Keyword Analysis"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.recentKeywordMatches.map((m,k)=>e.jsx(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:e.jsxs(ee,{variant:m.matched?"success":"error",className:"flex items-center gap-1.5 animate-pulse-once",children:[m.keyword,m.matched?e.jsx(U,{className:"h-3 w-3"}):e.jsx(Z,{className:"h-3 w-3"})]})},`${m.keyword}-${k}`)),t.recentKeywordMatches.length===0&&e.jsx("div",{className:"p-4 rounded-lg border border-dashed border-gray-200 dark:border-gray-700 text-center text-sm text-gray-500 dark:text-gray-400 w-full",children:"No keyword matches detected yet..."})]})]})]}):e.jsxs("div",{className:"relative p-6 border border-dashed border-gray-300 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-slate-800/50 text-center",children:[e.jsx("div",{className:"absolute -top-3 left-4 px-2 bg-gray-50 dark:bg-slate-800",children:e.jsx(ie,{})}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-6 opacity-50",children:[e.jsx(G,{className:"h-12 w-12 text-premium-500 dark:text-premium-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Real-Time Analysis"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-md",children:"Upgrade to premium to unlock real-time feedback and improvements as you edit your resume."})]})]})}function He(){var y;const{user:i}=ne(),{isPremium:a,openPaymentModal:x}=le(),{showToast:h}=oe(),{addNotification:b}=ye(),t=ae(),{formState:I,updateField:l,validateForm:m,errors:k}=Fe({file:null,jobRole:"",showLoginModal:!1,showSignupModal:!1,hasPreviousAnalysis:!1,continueIteration:!1},{file:r=>r?!0:"Please upload a resume file",jobRole:r=>r?!0:"Please select a job role"}),{file:n,jobRole:d,showLoginModal:g,showSignupModal:p,hasPreviousAnalysis:f,continueIteration:c}=I,{analysis:v,isAnalyzing:u,progress:A,stages:T,realTimeData:s,isRealTimeActive:$,isLoadingPDF:M,pdfError:D}=Ie(n,d,{isPremium:a,realTimeUpdates:!0}),J=o.useCallback(r=>{if(!i){l("showLoginModal",!0);return}l("file",r),b({type:"success",title:"Resume Uploaded",message:`Resume "${r.name}" uploaded successfully!`,duration:3e3}),h(`Resume "${r.name}" uploaded successfully!`,"success")},[i,h,l,b]),C=o.useCallback(r=>{if(r.preventDefault(),!i){l("showLoginModal",!0);return}if(!m()){b({type:"error",title:"Validation Error",message:"Please fill in all required fields correctly.",duration:4e3});return}if(!n||!d){h("Please upload a resume and select a job role.","error");return}console.log("handleSubmit called with file:",n),console.log("jobRole:",d);const P=new FileReader;P.onload=z=>{var O;const j=((O=z.target)==null?void 0:O.result).split("base64,")[1]||"",w=new URLSearchParams;if(w.set("jobRoleId",d),w.set("fileName",n.name),w.set("resumeContent",j),a&&(w.set("realtimeMode","true"),s&&s.keywordMatches)){const re={matched:s.keywordMatches.matched||[],missing:s.keywordMatches.missing||[]};w.set("keywordInsights",JSON.stringify(re))}const S=`/results?${w.toString()}`;console.log("Navigating to:",S);const E={fileName:n.name,jobRoleId:d,timestamp:Date.now()};sessionStorage.setItem("previousAnalysis",JSON.stringify(E)),l("hasPreviousAnalysis",!0),t(S)},P.readAsDataURL(n)},[n,d,t,a,s,i,h,l,m,b]),R=o.useCallback(()=>{if(!i){l("showLoginModal",!0);return}if(!n||!d||!a)return;const r=new FileReader;r.onload=P=>{var w;const L=((w=P.target)==null?void 0:w.result).split("base64,")[1]||"",j=new URLSearchParams;if(j.set("jobRoleId",d),j.set("fileName",n.name),j.set("resumeContent",L),j.set("realtimeMode","true"),s&&s.keywordMatches){const S={matched:s.keywordMatches.matched||[],missing:s.keywordMatches.missing||[]};j.set("keywordInsights",JSON.stringify(S))}t(`/results?${j.toString()}`)},r.readAsDataURL(n)},[n,d,t,a,s,i,l]),F=V.useRef(!1);V.useEffect(()=>{if(F.current)return;F.current=!0,sessionStorage.getItem("previousAnalysis")&&!f&&(sessionStorage.setItem("hasPreviousAnalysisDetected","true"),setTimeout(()=>{l("hasPreviousAnalysis",!0)},0))},[]);const N=V.useRef(!1),q=o.useCallback(()=>{if(N.current)return;if(!i&&!g){N.current=!0,setTimeout(()=>{l("showLoginModal",!0),N.current=!1},0);return}if(!n||!d){h("Please upload a resume and select a job role.","error");return}const r=new FileReader;r.onload=P=>{var S;const L=((S=P.target)==null?void 0:S.result).split("base64,")[1]||"",j=new URLSearchParams;if(j.set("jobRoleId",d),j.set("fileName",n.name),j.set("resumeContent",L),j.set("continueIteration","true"),s&&s.keywordMatches){const E={matched:s.keywordMatches.matched||[],missing:s.keywordMatches.missing||[]};j.set("keywordInsights",JSON.stringify(E))}const w=sessionStorage.getItem("previousAnalysis");w&&j.set("previousAnalysis",w),t(`/results?${j.toString()}`)},r.readAsDataURL(n)},[n,d,t,s,i,h,l]);return e.jsxs("div",{className:"min-h-screen pt-24 pb-16 bg-gradient-to-br from-slate-50 via-blue-50/30 to-purple-50/20 dark:from-slate-900 dark:via-slate-900 dark:to-slate-800 text-gray-900 dark:text-neutral-100",children:[e.jsx("div",{className:"absolute inset-0 bg-dot-pattern opacity-30 dark:opacity-10"}),e.jsx("div",{className:"container mx-auto px-4 md:px-6 relative",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-premium-display font-bold mb-4",children:e.jsx("span",{className:"text-gradient-luxury",children:"Upload Your Resume"})}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto font-luxury",children:a?"Experience our premium AI-powered analysis with real-time insights and advanced recommendations":"Get instant feedback and comprehensive analysis of your resume"})]}),e.jsxs(se,{className:"card-premium shadow-luxury-xl border-gradient-luxury",children:[e.jsxs(de,{className:"bg-gradient-to-r from-blue-50/50 to-purple-50/30 dark:from-slate-800/50 dark:to-slate-700/30 border-b border-gray-100/50 dark:border-gray-700/50",children:[e.jsxs(ce,{className:"text-2xl font-premium-display flex items-center",children:["Resume Analysis",a&&e.jsx("span",{className:"ml-3 px-3 py-1 text-sm bg-gradient-luxury-purple text-white rounded-full shadow-luxury premium-shimmer",children:"Premium"})]}),e.jsx(me,{className:"text-lg",children:a?"Experience advanced real-time analysis with premium-exclusive insights and actionable recommendations":"Upload your resume to receive detailed analysis and improvement suggestions"})]}),"            ",e.jsx(ue,{className:"p-8",children:e.jsx("form",{onSubmit:C,children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-lg font-luxury text-gray-700 dark:text-gray-300",children:"Upload Resume *"}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{onFileSelected:J,accept:".pdf,.docx",maxSize:5*1024*1024,isLoading:M,loadingText:"Processing PDF file..."}),D&&e.jsx("div",{className:"mt-3 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx(W,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:D})]})}),k.file&&e.jsx("div",{className:"mt-3 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx(W,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:k.file})]})}),M&&e.jsx("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800/50",children:e.jsxs("div",{className:"flex items-center gap-3 text-blue-600 dark:text-blue-400",children:[e.jsx(ge,{size:"sm"}),e.jsx("span",{className:"font-medium",children:"Processing PDF file..."})]})})]})]}),"                  ",n&&!D&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"card-premium shadow-luxury rounded-xl overflow-hidden border-gradient-luxury",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-slate-800/50 dark:to-slate-700/30 px-6 py-4 border-b border-gray-100/50 dark:border-gray-700/50",children:e.jsxs("h4",{className:"text-lg font-luxury text-gray-900 dark:text-white flex items-center",children:[e.jsx(H,{className:"w-5 h-5 mr-2 text-blue-600 dark:text-blue-400"}),"Resume Preview"]})}),e.jsx("div",{className:"p-1",children:e.jsx(xe,{file:n,height:400,scale:1,className:"rounded-lg shadow-inner",onError:(r,P)=>{console.error("PDF Error:",P,r),h(`Error loading PDF: ${(r==null?void 0:r.message)||"Unknown error"}. Try again.`,"error")},allowRetry:!0})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{htmlFor:"jobRole",className:"block text-lg font-luxury text-gray-700 dark:text-gray-300",children:"Target Job Role *"}),e.jsxs("select",{id:"jobRole",value:d,onChange:r=>l("jobRole",r.target.value),className:"w-full px-4 py-3 text-lg rounded-xl border-2 border-gray-200 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:text-gray-200 transition-all duration-300 hover:border-blue-300 dark:hover:border-blue-600",required:!0,children:[e.jsx("option",{value:"",children:"Select a job role"}),he.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))]}),k.jobRole&&e.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[e.jsx(W,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:k.jobRole})]})})]}),"                  ",e.jsx(X,{mode:"wait",children:u&&e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"card-premium shadow-luxury-lg p-8 rounded-xl bg-gradient-to-br from-blue-50/80 to-indigo-50/80 dark:from-blue-900/30 dark:to-indigo-900/30 border-gradient-luxury",children:[e.jsxs("h3",{className:"flex items-center text-2xl font-premium-display text-blue-600 dark:text-blue-400 mb-6",children:[e.jsx(Q,{className:"animate-spin mr-3 w-6 h-6"}),e.jsx("span",{className:"text-gradient-premium-blue",children:"Analyzing Resume..."})]}),e.jsx(Re,{progress:A,stages:T,className:"mt-4"}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm",children:[e.jsx("div",{className:"w-8 h-8 mx-auto mb-2 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center",children:e.jsx(H,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Document Analysis"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm",children:[e.jsx("div",{className:"w-8 h-8 mx-auto mb-2 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center",children:e.jsx(G,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"AI Processing"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm",children:[e.jsx("div",{className:"w-8 h-8 mx-auto mb-2 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center",children:e.jsx(U,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Results Generation"})]})]})]})}),"                  ",e.jsx(X,{children:v&&!u&&e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-6 right-6 card-premium bg-gradient-luxury-blue text-white px-6 py-4 rounded-xl shadow-luxury-xl flex items-center space-x-3 z-50 max-w-sm",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(U,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Analysis Complete!"}),e.jsx("p",{className:"text-sm opacity-90",children:"Your results are ready"})]}),e.jsx(B,{size:"sm",className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/30 text-white",onClick:()=>t(`/results?jobRoleId=${d}&fileName=${encodeURIComponent(n.name)}`),children:"View Results"})]})}),a&&u&&e.jsx(K.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4",children:e.jsx(De,{isActive:$,liveFeedback:s==null?void 0:s.liveFeedback,atsScoreTrend:s==null?void 0:s.atsScoreTrend,recentKeywordMatches:(y=s==null?void 0:s.keywordMatches)==null?void 0:y.realtimeMatches,jobDescriptionSimilarity:s==null?void 0:s.jobDescriptionSimilarity})}),"                  ",!a&&u&&e.jsx(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"card-premium shadow-luxury-lg p-6 rounded-xl border-gradient-luxury",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-luxury-purple flex items-center justify-center premium-shimmer",children:e.jsx(G,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-premium-display text-gradient-luxury mb-2",children:"Unlock Premium Real-Time Analysis"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 max-w-md mx-auto",children:"Premium users receive instant format checks, live keyword insights, and actionable suggestions in real-time as the analysis progresses."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-6 text-sm",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{children:"Real-time keyword analysis"})]})}),e.jsx("div",{className:"p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-purple-700 dark:text-purple-300",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),e.jsx("span",{children:"Instant format feedback"})]})}),e.jsx("div",{className:"p-3 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-300",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{children:"Live ATS score updates"})]})}),e.jsx("div",{className:"p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-orange-700 dark:text-orange-300",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),e.jsx("span",{children:"Advanced recommendations"})]})})]}),e.jsxs(B,{size:"lg",className:"btn-premium-luxury w-full md:w-auto",onClick:()=>x("monthly"),children:[e.jsx(G,{className:"mr-2 h-5 w-5"}),"Upgrade to Premium"]})]})}),"                  ",e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-4 mt-12 pt-8 border-t border-gray-100/50 dark:border-gray-700/50",children:[a&&s&&s.liveFeedback&&s.liveFeedback.length>0&&e.jsxs(B,{type:"button",onClick:R,disabled:u,variant:"outline",size:"lg",className:"w-full sm:w-auto min-w-[200px] border-2 border-blue-200 dark:border-blue-700 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 font-medium",children:[e.jsx(G,{className:"mr-2 h-5 w-5"}),"Continue with Live Feedback"]}),f&&!u&&e.jsxs(B,{type:"button",onClick:q,disabled:!n||!d||M,variant:"outline",size:"lg",className:"w-full sm:w-auto min-w-[200px] border-2 border-emerald-200 dark:border-emerald-700 text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 font-medium",children:[e.jsx(U,{className:"mr-2 h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Continue to Iterate"}),e.jsx("span",{className:"sm:hidden",children:"Iterate"})]}),e.jsx(B,{type:"submit",disabled:!n||!d||u||M,size:"lg",className:`w-full sm:w-auto min-w-[200px] px-6 py-3 ${a?"btn-premium-luxury":"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-luxury hover:shadow-luxury-lg transform hover:-translate-y-1 transition-all duration-300"} font-medium text-base`,children:u?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"animate-spin mr-2 h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Analyzing Your Resume..."}),e.jsx("span",{className:"sm:hidden",children:"Analyzing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"mr-2 h-5 w-5"}),a?"Premium Analysis":"Start Analysis"]})})]})]})})})]})]})}),e.jsx(Ae,{isOpen:g,onClose:()=>l("showLoginModal",!1),onSignUpClick:()=>{l("showLoginModal",!1),l("showSignupModal",!0)}}),e.jsx(Me,{isOpen:p,onClose:()=>l("showSignupModal",!1),onLoginClick:()=>{l("showSignupModal",!1),l("showLoginModal",!0)}})]})}export{He as UploadPage,He as default};
